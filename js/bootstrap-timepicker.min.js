/*! bootstrap-timepicker v0.2.3 
 * http://jdewit.github.com/bootstrap-timepicker
 * Copyright (c) 2013 Joris de Wit
 * MIT License
 */
(function(b,a,f,d){var c=function(g,h){this.widget="",this.$element=b(g),this.defaultTime=h.defaultTime,this.disableFocus=h.disableFocus,this.isOpen=h.isOpen,this.minuteStep=h.minuteStep,this.modalBackdrop=h.modalBackdrop,this.secondStep=h.secondStep,this.showInputs=h.showInputs,this.showMeridian=h.showMeridian,this.showSeconds=h.showSeconds,this.template=h.template,this.appendWidgetTo=h.appendWidgetTo,this._init()};c.prototype={constructor:c,_init:function(){var e=this;this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")?(this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":b.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":b.proxy(this.highlightUnit,this),"click.timepicker":b.proxy(this.highlightUnit,this),"keydown.timepicker":b.proxy(this.elementKeydown,this),"blur.timepicker":b.proxy(this.blurElement,this)})):this.template?this.$element.on({"focus.timepicker":b.proxy(this.showWidget,this),"click.timepicker":b.proxy(this.showWidget,this),"blur.timepicker":b.proxy(this.blurElement,this)}):this.$element.on({"focus.timepicker":b.proxy(this.highlightUnit,this),"click.timepicker":b.proxy(this.highlightUnit,this),"keydown.timepicker":b.proxy(this.elementKeydown,this),"blur.timepicker":b.proxy(this.blurElement,this)}),this.$widget=this.template!==!1?b(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",b.proxy(this.widgetClick,this)):!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){b(this).on({"click.timepicker":function(){b(this).select()},"keydown.timepicker":b.proxy(e.widgetKeydown,e)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=d,this.updateFromElementVal()},decrementHour:function(){if(this.showMeridian){if(1===this.hour){this.hour=12}else{if(12===this.hour){return this.hour--,this.toggleMeridian()}if(0===this.hour){return this.hour=11,this.toggleMeridian()}this.hour--}}else{0===this.hour?this.hour=23:this.hour--}this.update()},decrementMinute:function(g){var e;e=g?this.minute-g:this.minute-this.minuteStep,0>e?(this.decrementHour(),this.minute=e+60):this.minute=e,this.update()},decrementSecond:function(){var e=this.second-this.secondStep;0>e?(this.decrementMinute(!0),this.second=e+60):this.second=e,this.update()},elementKeydown:function(e){switch(e.keyCode){case 9:switch(this.updateFromElementVal(),this.highlightedUnit){case"hour":e.preventDefault(),this.highlightNextUnit();break;case"minute":(this.showMeridian||this.showSeconds)&&(e.preventDefault(),this.highlightNextUnit());break;case"second":this.showMeridian&&(e.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:e.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:switch(e.preventDefault(),this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:e.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(e.preventDefault(),this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(h,g,k,j){return h=10>h?"0"+h:h,g=10>g?"0"+g:g,k=10>k?"0"+k:k,h+":"+g+(this.showSeconds?":"+k:"")+(this.showMeridian?" "+j:"")},getCursorPosition:function(){var g=this.$element.get(0);if("selectionStart" in g){return g.selectionStart}if(f.selection){g.focus();var e=f.selection.createRange(),h=f.selection.createRange().text.length;return e.moveStart("character",-g.value.length),e.text.length-h}},getTemplate:function(){var j,g,m,l,k,o;switch(this.showInputs?(g='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>',m='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>',l='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>',k='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>'):(g='<span class="bootstrap-timepicker-hour"></span>',m='<span class="bootstrap-timepicker-minute"></span>',l='<span class="bootstrap-timepicker-second"></span>',k='<span class="bootstrap-timepicker-meridian"></span>'),o='<table><tr><td><a href="#" data-action="incrementHour"><i class="fa-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="fa-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="fa-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="fa-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+g+'</td> <td class="separator">:</td><td>'+m+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+l+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+k+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="fa-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="fa-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="fa-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="fa-chevron-down"></i></a></td>':"")+"</tr></table>",this.template){case"modal":j='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal">��</a><h3>Pick a Time</h3></div><div class="modal-content">'+o+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">OK</a></div></div>';break;case"dropdown":j='<div class="bootstrap-timepicker-widget dropdown-menu">'+o+"</div>"}return j},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){this.isOpen!==!1&&(this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),"modal"===this.template?this.$widget.modal("hide"):this.$widget.removeClass("open"),b(f).off("mousedown.timepicker"),this.isOpen=!1)},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&2>=this.position?this.highlightHour():this.position>=3&&5>=this.position?this.highlightMinute():this.position>=6&&8>=this.position?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&11>=this.position&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var e=this.$element.get(0);this.highlightedUnit="hour",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(0,2)},0)},highlightMinute:function(){var e=this.$element.get(0);this.highlightedUnit="minute",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(3,5)},0)},highlightSecond:function(){var e=this.$element.get(0);this.highlightedUnit="second",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(6,8)},0)},highlightMeridian:function(){var e=this.$element.get(0);this.highlightedUnit="meridian",e.setSelectionRange&&(this.showSeconds?setTimeout(function(){e.setSelectionRange(9,11)},0):setTimeout(function(){e.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(11===this.hour){return this.hour++,this.toggleMeridian()}12===this.hour&&(this.hour=0)}return 23===this.hour?(this.hour=0,d):(this.hour++,this.update(),d)},incrementMinute:function(g){var e;e=g?this.minute+g:this.minute+this.minuteStep-this.minute%this.minuteStep,e>59?(this.incrementHour(),this.minute=e-60):this.minute=e,this.update()},incrementSecond:function(){var e=this.second+this.secondStep-this.second%this.secondStep;e>59?(this.incrementMinute(!0),this.second=e-60):this.second=e,this.update()},remove:function(){b("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(j){if(this.$element.val()){this.updateFromElementVal()}else{if("current"===j){var g=new Date,m=g.getHours(),l=Math.floor(g.getMinutes()/this.minuteStep)*this.minuteStep,k=Math.floor(g.getSeconds()/this.secondStep)*this.secondStep,o="AM";this.showMeridian&&(0===m?m=12:m>=12?(m>12&&(m-=12),o="PM"):o="AM"),this.hour=m,this.minute=l,this.second=k,this.meridian=o,this.update()}else{j===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(j)}}},setTime:function(h){var g,j;this.showMeridian?(g=h.split(" "),j=g[0].split(":"),this.meridian=g[1]):j=h.split(":"),this.hour=parseInt(j[0],10),this.minute=parseInt(j[1],10),this.second=parseInt(j[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?(this.hour>12?this.hour=12:1>this.hour&&(this.hour=12),"am"===this.meridian||"a"===this.meridian?this.meridian="AM":("pm"===this.meridian||"p"===this.meridian)&&(this.meridian="PM"),"AM"!==this.meridian&&"PM"!==this.meridian&&(this.meridian="AM")):this.hour>=24?this.hour=23:0>this.hour&&(this.hour=0),0>this.minute?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:0>this.second?this.second=0:this.second>=60&&(this.second=59)),this.update()},showWidget:function(){if(!this.isOpen&&!this.$element.is(":disabled")){var e=this;b(f).on("mousedown.timepicker",function(g){0===b(g.target).closest(".bootstrap-timepicker-widget").length&&e.hideWidget()}),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.disableFocus&&this.$element.blur(),this.updateFromElementVal(),"modal"===this.template?this.$widget.modal("show").on("hidden",b.proxy(this.hideWidget,this)):this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0}},toggleMeridian:function(){this.meridian="AM"===this.meridian?"PM":"AM",this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.updateElement(),this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var e=this.$element.val();e&&this.setTime(e)},updateWidget:function(){if(this.$widget!==!1){var h=10>this.hour?"0"+this.hour:this.hour,g=10>this.minute?"0"+this.minute:this.minute,j=10>this.second?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(h),this.$widget.find("input.bootstrap-timepicker-minute").val(g),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(j),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(h),this.$widget.find("span.bootstrap-timepicker-minute").text(g),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(j),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))}},updateFromWidgetInputs:function(){if(this.$widget!==!1){var e=b("input.bootstrap-timepicker-hour",this.$widget).val()+":"+b("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+b("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+b("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setTime(e)}},widgetClick:function(g){g.stopPropagation(),g.preventDefault();var h=b(g.target).closest("a").data("action");h&&this[h]()},widgetKeydown:function(g){var j=b(g.target).closest("input"),h=j.attr("name");switch(g.keyCode){case 9:if(this.showMeridian){if("meridian"===h){return this.hideWidget()}}else{if(this.showSeconds){if("second"===h){return this.hideWidget()}}else{if("minute"===h){return this.hideWidget()}}}this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:switch(g.preventDefault(),h){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}break;case 40:switch(g.preventDefault(),h){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}}}},b.fn.timepicker=function(g){var h=Array.apply(null,arguments);return h.shift(),this.each(function(){var e=b(this),j=e.data("timepicker"),i="object"==typeof g&&g;j||e.data("timepicker",j=new c(this,b.extend({},b.fn.timepicker.defaults,i,b(this).data()))),"string"==typeof g&&j[g].apply(j,h)})},b.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker"},b.fn.timepicker.Constructor=c})(jQuery,window,document);